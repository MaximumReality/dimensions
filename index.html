<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Maximum Reality: Fixed Dimensions</title>
    <style>
        :root {
            --city-tint: rgba(255, 0, 255, 0.15);
            --neon-blue: #00ffff;
        }

        body, html {
            margin: 0; padding: 0;
            width: 100%; height: 100%;
            overflow: hidden; background: #000;
        }

        #game-stage {
            width: 100vw; height: 100vh;
            position: relative;
            background: linear-gradient(var(--city-tint), var(--city-tint)), url('gg-bg.png');
            background-size: cover;
            background-blend-mode: overlay;
        }

        /* --- LAYER MANAGEMENT --- */
        
        /* Level 1: Back Buildings (Layer C) */
        .layer-c { z-index: 1; height: 70vh; opacity: 0.4; filter: blur(1px); }
        
        /* Level 2: Mid Buildings (Layer B) */
        .layer-b { z-index: 2; height: 55vh; opacity: 0.7; }
        
        /* Level 3: Front Buildings (Layer A) */
        .layer-a { z-index: 3; height: 40vh; opacity: 1; }

        .building {
            position: absolute;
            bottom: 15vh; /* Aligned to floor top */
            background-repeat: no-repeat;
            background-size: contain;
            background-position: bottom;
        }

        /* Level 4: The Floor */
        #floor {
            position: absolute; bottom: 0;
            width: 100%; height: 16vh;
            background: url('floor.png') repeat-x;
            background-size: contain; 
            z-index: 10; /* Keeps scenery behind feet but above buildings */
        }

        /* Level 5: The Characters (Highest Priority) */
        #lori-commander {
            position: absolute; bottom: 10vh; left: 5vw;
            height: 48vh; z-index: 50; /* High Z-index to stay on top */
            pointer-events: auto; /* Ensures tap works */
        }

        #azul-hacker {
            position: absolute; bottom: 12vh; left: 28vw;
            width: 100px; height: 100px;
            background-size: contain; background-repeat: no-repeat;
            z-index: 51;
            animation: azul-run 0.4s steps(1) infinite;
        }

        .snack { z-index: 55; position: absolute; width: 50px; }

        @keyframes azul-run {
            0% { background-image: url('Azul-run.png'); }
            33% { background-image: url('Azul-run2.png'); }
            66% { background-image: url('Azul-run3.png'); }
            100% { background-image: url('Azul-run.png'); }
        }
    </style>
</head>
<body>

<div id="game-stage">
    <img src="Banner.PNG" style="position:absolute; top:0; width:100%; z-index:100;">
    
    <div id="floor"></div>
    
    <img src="lori-suit.png" id="lori-commander" alt="Lori">
    <div id="azul-hacker"></div>
</div>

<script>
    const stage = document.getElementById('game-stage');
    // Ensure we append buildings at the start of the stage so they stay "behind" in DOM order too
    function createBuilding(type) {
        const b = document.createElement('div');
        b.className = `building layer-${type}`;
        b.style.backgroundImage = `url('building-${type}.png')`;
        b.style.right = '-400px';
        
        // prepend puts it behind characters in the DOM
        stage.prepend(b);

        let pos = -400;
        const speeds = { 'a': 5, 'b': 3, 'c': 1.5 };
        const move = setInterval(() => {
            pos += speeds[type];
            b.style.right = pos + 'px';
            if (pos > window.innerWidth + 400) {
                clearInterval(move);
                b.remove();
            }
        }, 16);
    }

    // Logic for Lori tossing snacks remains the same
    // Just make sure snack z-index is high!
    
    setInterval(() => createBuilding('c'), 5000);
    setInterval(() => createBuilding('b'), 3500);
    setInterval(() => createBuilding('a'), 2000);
</script>
</body>
</html>
