<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Maximum Reality: City Hack</title>
    <style>
        :root {
            --city-tint: rgba(255, 0, 255, 0.2); /* Change this to cast any color */
            --neon-blue: #00ffff;
        }

        body, html {
            margin: 0; padding: 0;
            width: 100%; height: 100%;
            overflow: hidden; background: #000;
        }

        #game-stage {
            width: 100vw; height: 100vh;
            position: relative;
            /* Gradient Gray Background with a Color Cast */
            background: linear-gradient(var(--city-tint), var(--city-tint)), url('gg-bg.png');
            background-size: cover;
            background-blend-mode: overlay;
        }

        /* Layered Building System */
        .building {
            position: absolute;
            bottom: 15vh;
            background-repeat: no-repeat;
            background-size: contain;
            background-position: bottom;
        }

        /* C is Tallest (Back Layer - Slower) */
        .layer-c { height: 70vh; width: 300px; z-index: 1; opacity: 0.6; }
        /* B is Mid (Middle Layer) */
        .layer-b { height: 50vh; width: 200px; z-index: 2; opacity: 0.8; }
        /* A is Smallest (Front Layer - Faster) */
        .layer-a { height: 30vh; width: 150px; z-index: 3; }

        #floor {
            position: absolute; bottom: 0;
            width: 100%; height: 15vh;
            background: url('floor.png') repeat-x;
            background-size: contain; z-index: 10;
        }

        #lori-commander {
            position: absolute; bottom: 12vh; left: 5vw;
            height: 45vh; z-index: 20;
        }

        #azul-hacker {
            position: absolute; bottom: 12vh; left: 28vw;
            width: 100px; height: 100px;
            background-size: contain; background-repeat: no-repeat;
            z-index: 21;
            animation: azul-run 0.4s steps(1) infinite;
        }

        @keyframes azul-run {
            0% { background-image: url('Azul-run.png'); }
            33% { background-image: url('Azul-run2.png'); }
            66% { background-image: url('Azul-run3.png'); }
            100% { background-image: url('Azul-run.png'); }
        }

        .scenery-prop {
            position: absolute; bottom: 12vh; height: 50px; z-index: 15;
        }
        /* The Snack Items */
.snack {
    position: absolute;
    width: 50px;
    height: 50px;
    z-index: 15;
    transition: transform 0.1s linear;
}

/* Jump Animation for Azul */
.jump {
    animation: azul-run 0.4s steps(1) infinite, azul-jump-arc 0.6s ease-out !important;
}

@keyframes azul-jump-arc {
    0% { bottom: 12vh; }
    50% { bottom: 30vh; } /* Peak of the jump */
    100% { bottom: 12vh; }
}

#lori-commander {
    cursor: pointer;
    transition: transform 0.1s;
}

#lori-commander:active {
    transform: scale(1.05); /* Visual feedback when tapping Lori */
}

    </style>
</head>
<body>

<div id="game-stage">
    <img src="Banner.PNG" style="position:absolute; top:0; width:100%; z-index:100;">
    
    <div id="floor"></div>
    <img src="lori-suit.png" id="lori-commander">
    <div id="azul-hacker"></div>
</div>

<script>
    const stage = document.getElementById('game-stage');
const azul = document.getElementById('azul-hacker');
const lori = document.getElementById('lori-commander');

const snacks = ['mochkil-burger.png', 'pink-donut.png', 'taco.png', 'hotdog.png', 'roast-chicken.png', 'chips.png'];

// 1. Function to make Azul jump
function azulJump() {
    if (!azul.classList.contains('jump')) {
        azul.classList.add('jump');
        setTimeout(() => {
            azul.classList.remove('jump');
        }, 600);
    }
}

// 2. Function for Lori to toss a snack
function tossSnack() {
    const snackImg = document.createElement('img');
    const randomSnack = snacks[Math.floor(Math.random() * snacks.length)];
    
    snackImg.src = randomSnack;
    snackImg.className = 'snack';
    
    // Start at Lori's position
    let snackX = 15; // vw
    let snackY = 40; // vh
    snackImg.style.left = snackX + 'vw';
    snackImg.style.bottom = snackY + 'vh';
    
    stage.appendChild(snackImg);

    // Physics for the toss
    let speedX = 1.2;
    let speedY = 0.5;
    let gravity = 0.05;

    const moveSnack = setInterval(() => {
        snackX += speedX;
        speedY -= gravity;
        snackY += speedY;

        snackImg.style.left = snackX + 'vw';
        snackImg.style.bottom = snackY + 'vh';

        // Check for "Catch" (Collision with Azul)
        const azulRect = azul.getBoundingClientRect();
        const snackRect = snackImg.getBoundingClientRect();

        if (snackRect.left < azulRect.right &&
            snackRect.right > azulRect.left &&
            snackRect.top < azulRect.bottom &&
            snackRect.bottom > azulRect.top) {
            
            // Azul caught it!
            azulJump();
            snackImg.remove();
            clearInterval(moveSnack);
            console.log("Mochkil Snack Attack Success!");
        }

        // Remove if it falls off screen
        if (snackY < 0 || snackX > 100) {
            clearInterval(moveSnack);
            snackImg.remove();
        }
    }, 20);
}

// Tap Lori to toss snacks
lori.addEventListener('touchstart', (e) => {
    e.preventDefault();
    tossSnack();
});

// Generic scenery and building spawners from previous step
function createBuilding(type) {
    const b = document.createElement('div');
    b.className = `building layer-${type}`;
    b.style.backgroundImage = `url('building-${type}.png')`;
    b.style.right = '-400px';
    stage.appendChild(b);
    let pos = -400;
    const speeds = { 'a': 6, 'b': 4, 'c': 2 };
    const move = setInterval(() => {
        pos += speeds[type];
        b.style.right = pos + 'px';
        if (pos > window.innerWidth + 400) { clearInterval(move); b.remove(); }
    }, 16);
}

setInterval(() => createBuilding('c'), 4000);
setInterval(() => createBuilding('b'), 3000);
setInterval(() => createBuilding('a'), 2000);

// Background Tint Logic
setInterval(() => {
    const colors = ['rgba(255,0,255,0.2)', 'rgba(0,255,255,0.2)', 'rgba(255,255,0,0.1)'];
    document.documentElement.style.setProperty('--city-tint', colors[Math.floor(Math.random()*colors.length)]);
}, 5000);

</script>

</body>
</html>
