<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Maximum Reality: Cyber Alley Fixed</title>
    <style>
        /* 1. THE FOUNDATION */
        body, html {
            margin: 0; padding: 0;
            width: 100%; height: 100%;
            overflow: hidden; background: #111;
        }

        /* 2. THE BACKGROUND STACK */
        #game-viewport {
            position: relative;
            width: 100vw; height: 100vh;
            background: url('gg-bg.png') center bottom no-repeat;
            background-size: cover;
            z-index: 0; /* Base Layer */
        }

        /* 3. PARALLAX CITY LAYERS */
        .city-layer {
            position: absolute;
            bottom: 0; left: 0;
            width: 200%; height: 100%;
            pointer-events: none; /* Buildings don't block clicks */
        }

        /* Layer C: Deep Background (Slowest) */
        #layer-c-container { z-index: 1; opacity: 0.3; }
        /* Layer B: Mid-ground */
        #layer-b-container { z-index: 2; opacity: 0.6; }
        /* Layer A: Close-ground (Fastest) */
        #layer-a-container { z-index: 3; }

        /* Building styling */
        .building {
            position: absolute;
            bottom: 15vh;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: bottom;
        }
        
        /* 4. THE PLAYABLE ZONE */
        #floor {
            position: absolute; bottom: 0;
            width: 100%; height: 18vh;
            background: url('floor.png') repeat-x;
            background-size: contain;
            z-index: 10; /* Above all buildings */
        }

        #lori-hero {
            position: absolute; bottom: 10vh; left: 10vw;
            height: 45vh; z-index: 20; /* Front and center */
        }

        #azul-runner {
            position: absolute; bottom: 12vh; left: 30vw;
            width: 100px; height: 100px;
            z-index: 21;
            background-size: contain;
            animation: azul-run 0.5s steps(1) infinite;
        }

        @keyframes azul-run {
            0% { background-image: url('Azul-run.png'); }
            33% { background-image: url('Azul-run2.png'); }
            66% { background-image: url('Azul-run3.png'); }
            100% { background-image: url('Azul-run.png'); }
        }
    </style>
</head>
<body>

<div id="game-viewport">
    <div id="layer-c-container" class="city-layer"></div>
    <div id="layer-b-container" class="city-layer"></div>
    <div id="layer-a-container" class="city-layer"></div>

    <img src="Banner.PNG" style="position:absolute; top:0; width:100%; z-index:100;">
    <div id="floor"></div>
    <img src="lori-suit.png" id="lori-hero">
    <div id="azul-runner"></div>
</div>

<script>
    const containers = {
        'a': document.getElementById('layer-a-container'),
        'b': document.getElementById('layer-b-container'),
        'c': document.getElementById('layer-c-container')
    };

    const heights = { 'a': '35vh', 'b': '55vh', 'c': '75vh' };
    const speeds = { 'a': 6, 'b': 3, 'c': 1 };

    function spawnBuilding(type) {
        const b = document.createElement('div');
        b.className = 'building';
        b.style.backgroundImage = `url('building-${type}.png')`;
        b.style.height = heights[type];
        b.style.width = '250px';
        b.style.right = '-300px';
        
        containers[type].appendChild(b);

        let pos = -300;
        const move = setInterval(() => {
            pos += speeds[type];
            b.style.right = pos + 'px';
            if (pos > window.innerWidth + 400) {
                clearInterval(move);
                b.remove();
            }
        }, 16);
    }

    // Synchronized city spawn
    setInterval(() => spawnBuilding('c'), 4500);
    setInterval(() => spawnBuilding('b'), 3000);
    setInterval(() => spawnBuilding('a'), 2000);
</script>
</body>
</html>
